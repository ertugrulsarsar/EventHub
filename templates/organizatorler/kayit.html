{% extends 'base.html' %}

{% block title %}Kayıt Ol - Etkinlik Yönetimi{% endblock %}

{% block content %}
<!-- Page Header -->
<div class="flex flex-col md:flex-row md:items-center md:justify-between mb-8 gap-4">
    <div>
        <h1 class="text-3xl md:text-4xl font-bold text-gray-800 flex items-center gap-2">
            <i class="fas fa-user-plus text-primary"></i>
            Kayıt Ol
        </h1>
        <p class="text-lg text-gray-600 mt-2">
            Etkinlik yönetimi sistemine organizatör olarak kayıt olun
        </p>
    </div>
    <div class="flex justify-end">
        <a href="{% url 'organizatorler:login' %}" class="px-4 py-2 border border-primary text-primary rounded-lg hover:bg-primary hover:text-white transition-colors flex items-center gap-2">
            <i class="fas fa-sign-in-alt"></i> Giriş Yap
        </a>
    </div>
</div>

<!-- Registration Form -->
<div class="max-w-2xl mx-auto">
    <div class="bg-white rounded-xl shadow-md">
        <div class="px-6 py-4 border-b border-gray-200">
            <h5 class="text-lg font-semibold text-gray-800 flex items-center gap-2">
                <i class="fas fa-user-plus text-primary"></i> Organizatör Kaydı
            </h5>
        </div>
        <div class="p-6">
            <form method="post" novalidate>
                {% csrf_token %}
                
                <h6 class="text-md font-semibold text-gray-800 mb-4 flex items-center gap-2">
                    <i class="fas fa-user text-primary"></i> Kişisel Bilgiler
                </h6>
                
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div>
                        <label for="first_name" class="block text-sm font-medium text-gray-700 mb-2">Ad <span class="text-red-500">*</span></label>
                        <input type="text" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-primary" 
                               id="first_name" name="first_name" 
                               value="{{ form.first_name.value|default:'' }}" required>
                        {% if form.first_name.errors %}
                        <div class="mt-1 text-sm text-red-600 flex items-center gap-1">
                            <i class="fas fa-exclamation-circle"></i> {{ form.first_name.errors.0 }}
                        </div>
                        {% endif %}
                    </div>
                    <div>
                        <label for="last_name" class="block text-sm font-medium text-gray-700 mb-2">Soyad <span class="text-red-500">*</span></label>
                        <input type="text" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-primary" 
                               id="last_name" name="last_name" 
                               value="{{ form.last_name.value|default:'' }}" required>
                        {% if form.last_name.errors %}
                        <div class="mt-1 text-sm text-red-600 flex items-center gap-1">
                            <i class="fas fa-exclamation-circle"></i> {{ form.last_name.errors.0 }}
                        </div>
                        {% endif %}
                    </div>
                </div>
                
                <div class="mt-6">
                    <label for="username" class="block text-sm font-medium text-gray-700 mb-2">Kullanıcı Adı <span class="text-red-500">*</span></label>
                    <input type="text" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-primary" 
                           id="username" name="username" 
                           value="{{ form.username.value|default:'' }}" required>
                    {% if form.username.errors %}
                    <div class="mt-1 text-sm text-red-600 flex items-center gap-1">
                        <i class="fas fa-exclamation-circle"></i> {{ form.username.errors.0 }}
                    </div>
                    {% endif %}
                    <div class="mt-1 text-sm text-gray-500">Kullanıcı adınız benzersiz olmalıdır</div>
                </div>
                
                <div class="mt-6">
                    <label for="email" class="block text-sm font-medium text-gray-700 mb-2">E-posta Adresi <span class="text-red-500">*</span></label>
                    <input type="email" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-primary" 
                           id="email" name="email" 
                           value="{{ form.email.value|default:'' }}" required>
                    {% if form.email.errors %}
                    <div class="mt-1 text-sm text-red-600 flex items-center gap-1">
                        <i class="fas fa-exclamation-circle"></i> {{ form.email.errors.0 }}
                    </div>
                    {% endif %}
                </div>
                
                <hr class="my-8">
                
                <h6 class="text-md font-semibold text-gray-800 mb-4 flex items-center gap-2">
                    <i class="fas fa-shield-alt text-primary"></i> Güvenlik
                </h6>
                
                <div class="mt-6">
                    <label for="password1" class="block text-sm font-medium text-gray-700 mb-2">Şifre <span class="text-red-500">*</span></label>
                    <input type="password" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-primary" 
                           id="password1" name="password1" required>
                    {% if form.password1.errors %}
                    <div class="mt-1 text-sm text-red-600 flex items-center gap-1">
                        <i class="fas fa-exclamation-circle"></i> {{ form.password1.errors.0 }}
                    </div>
                    {% endif %}
                    <div class="mt-1 text-sm text-gray-500">
                        Şifreniz en az 8 karakter uzunluğunda olmalı ve harf, rakam içermelidir
                    </div>
                </div>
                
                <div class="mt-6">
                    <label for="password2" class="block text-sm font-medium text-gray-700 mb-2">Şifre Tekrar <span class="text-red-500">*</span></label>
                    <input type="password" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-primary" 
                           id="password2" name="password2" required>
                    {% if form.password2.errors %}
                    <div class="mt-1 text-sm text-red-600 flex items-center gap-1">
                        <i class="fas fa-exclamation-circle"></i> {{ form.password2.errors.0 }}
                    </div>
                    {% endif %}
                </div>
                
                <hr class="my-8">
                
                <h6 class="text-md font-semibold text-gray-800 mb-4 flex items-center gap-2">
                    <i class="fas fa-building text-primary"></i> Organizasyon Bilgileri
                </h6>
                
                <div class="mt-6">
                    <label for="organizasyon_adi" class="block text-sm font-medium text-gray-700 mb-2">Organizasyon Adı</label>
                    <input type="text" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-primary" 
                           id="organizasyon_adi" name="organizasyon_adi" 
                           value="{{ form.organizasyon_adi.value|default:'' }}">
                    <div class="mt-1 text-sm text-gray-500">Çalıştığınız organizasyonun adı (opsiyonel)</div>
                </div>
                
                <div class="mt-6">
                    <label for="pozisyon" class="block text-sm font-medium text-gray-700 mb-2">Pozisyon</label>
                    <input type="text" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-primary" 
                           id="pozisyon" name="pozisyon" 
                           value="{{ form.pozisyon.value|default:'' }}">
                    <div class="mt-1 text-sm text-gray-500">Organizasyondaki pozisyonunuz (opsiyonel)</div>
                </div>
                
                <div class="mt-6">
                    <label for="telefon" class="block text-sm font-medium text-gray-700 mb-2">Telefon</label>
                    <input type="tel" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-primary" 
                           id="telefon" name="telefon" 
                           value="{{ form.telefon.value|default:'' }}" 
                           placeholder="+905551234567">
                    <div class="mt-1 text-sm text-gray-500">İletişim telefon numaranız (opsiyonel)</div>
                </div>
                
                <!-- Terms and Conditions -->
                <div class="mt-6">
                    <div class="flex items-center">
                        <input type="checkbox" id="terms" name="terms" class="h-4 w-4 text-primary focus:ring-primary border-gray-300 rounded" required>
                        <label for="terms" class="ml-2 text-sm text-gray-700">
                            <a href="#" class="underline text-primary hover:text-primary-dark">Kullanım şartlarını</a> ve 
                            <a href="#" class="underline text-primary hover:text-primary-dark">gizlilik politikasını</a> kabul ediyorum *
                        </label>
                    </div>
                </div>
                
                <!-- Form Actions -->
                <div class="mt-8">
                    <button type="submit" class="w-full px-4 py-2 bg-primary text-white rounded-lg hover:bg-primary-dark transition-colors flex items-center justify-center gap-2">
                        <i class="fas fa-user-plus"></i> Kayıt Ol
                    </button>
                </div>
                
                <div class="text-center mt-6">
                    <small class="text-gray-600">
                        Zaten hesabınız var mı? 
                        <a href="{% url 'organizatorler:login' %}" class="underline text-primary hover:text-primary-dark">Giriş yapın</a>
                    </small>
                </div>
                
                <hr class="my-8">
                
                <div class="text-center">
                    <small class="text-gray-600">
                        Sadece etkinliklere katılmak mı istiyorsunuz? 
                        <a href="{% url 'katilimcilar:kayit' %}" class="underline text-primary hover:text-primary-dark">Katılımcı kaydı</a>
                    </small>
                </div>
            </form>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script>
// Form validation
document.addEventListener('DOMContentLoaded', function() {
    const form = document.querySelector('form');
    const password1 = document.getElementById('password1');
    const password2 = document.getElementById('password2');
    
    // Password confirmation validation
    function validatePassword() {
        if (password1.value !== password2.value) {
            password2.setCustomValidity('Şifreler eşleşmiyor');
        } else {
            password2.setCustomValidity('');
        }
    }
    
    password1.addEventListener('input', validatePassword);
    password2.addEventListener('input', validatePassword);
    
    // Username validation
    const username = document.getElementById('username');
    username.addEventListener('input', function() {
        if (this.value.length < 3) {
            this.setCustomValidity('Kullanıcı adı en az 3 karakter olmalıdır');
        } else {
            this.setCustomValidity('');
        }
    });
    
    // Email validation
    const email = document.getElementById('email');
    email.addEventListener('input', function() {
        const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
        if (!emailRegex.test(this.value)) {
            this.setCustomValidity('Geçerli bir e-posta adresi giriniz');
        } else {
            this.setCustomValidity('');
        }
    });
});
</script>
{% endblock %} 